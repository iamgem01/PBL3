# ========================================
# COLLAB SERVICE CONFIGURATION
# ========================================

# Server Configuration
server.port=8083
spring.application.name=collab-service

# ========================================
# NOTE SERVICE URL (Important!)
# ========================================
# URL của note-service để sync notes
note.service.url=http://localhost:8082

# ========================================
# MONGODB CONFIGURATION
# ========================================
spring.data.mongodb.uri=mongodb://localhost:27017/collaboration_notes_db
spring.data.mongodb.database=collaboration_notes_db

# MongoDB connection options
spring.data.mongodb.auto-index-creation=true

# ========================================
# CORS CONFIGURATION
# ========================================
spring.web.cors.allowed-origins=http://localhost:3000
spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
spring.web.cors.allowed-headers=*
spring.web.cors.allow-credentials=true

# ========================================
# LOGGING CONFIGURATION
# ========================================
# Set log levels (DEBUG cho development, INFO cho production)
logging.level.root=INFO
logging.level.com.java.smartnote.collabservice=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.springframework.messaging=DEBUG

# Log pattern
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# ========================================
# WEBSOCKET CONFIGURATION
# ========================================
# WebSocket message size limits (bytes)
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# ========================================
# ACTUATOR (Health Check Endpoints)
# ========================================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always

# ========================================
# EMAIL CONFIGURATION (GMAIL)
# ========================================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=aeternusad01@gmail.com
spring.mail.password=${GMAIL_APP_PASSWORD}


# Gmail settings
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com

# SMTP Timeout settings
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000


allowed.origins=http://localhost:3000
spring.websocket.allowed-origins=http://localhost:3000

# Thêm dòng này để Spring Boot có thể resolve biến từ .env
GMAIL_APP_PASSWORD=${GMAIL_APP_PASSWORD:}